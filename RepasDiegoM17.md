# Pdf1
Internet of Things és la xarxa d'objectes físics que contenen tecnologia
incrustada per comunicar-se i sentir o interactuar amb els seus estats
interns o amb l'entorn extern.

-  **Numeros de persones connectades**
   
  En 2020 hi havia més de 50.000 milions de dispositius connectats - 7 dispositius per persona aproximadament.
  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
- **A on se troben dispositiu IoT - arees - exemples casos - casos de us**

| Área de Aplicación | Segmento Específico                         | Valor de Mercado Previsto |
|--------------------|--------------------------------------------|--------------------------:|
| Construcción           | Construcción Inteligente                   |                $22 mil millones |
| Salud              | Atención Sanitaria Inteligente             |               $1 billón |
| Dispositivos       | Dispositivos Portátiles                    |                $60 mil millones |
| IoV                | ---------                                  |               $104 mil millones |
| Hogar              | Hogar Inteligente                          |                $60 mil millones |
| Educación          | Educación Inteligente                      |               $344 mil millones |
| Medio ambiente     | Vigilancia Hidrogeológica, Atmosférica y Ambiental |               $705 mil millones |
| Asuntos Públicos   | Asuntos de Agua                            |               $330 mil millones |
| Energía            | --             -                           |               $400 mil millones |
| Ciudad             | Seguridad y Transporte                     |               $1.6 billones |

  Automòbils: sensors per tenir en temps real la màxima informació
  
  Ciutats: semàfors, enllumenat, contenidors d’escombraries, transports públics, ...
  
  Casa: càmeres TV’s, mòbils, assistència, neveres, rentadores, routers
  
  Industria (IIoT): controladors, robots, sistemes de monitorització,...
  
  Agricultura: sensors per la presa de decisions sobre la humitat, aigua, per recopilar i analitzar les dades, ...
  
  Hospitals: control de tovalloles utilitzades en operacions, càmeres, escanners, control de medicaments en stock,
  
  Medicina i Salut IoT utilitzat per al seguiment remot de pacients i la connexió de dispositius com monitors de pressió sanguínia, marcapassos i audiòfons intel·ligents. Ús de llits hospitalaris intel·ligents i tecnologies innovadores com el DEKA's Luke Arm per millorar la qualitat de vida dels pacients.

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
- **Tipus aplicacions industrials**
  
  Enfocament: Aquestes aplicacions es centren en la producció i manufactura, així com en la millora dels processos industrials.
  
  Exemples: Inclouen la robotització en les línies de muntatge, sistemes de gestió de la producció, manteniment predictiu en fàbriques, i aplicacions de monitorització i control de processos.
  
  Objectiu: L'objectiu principal és augmentar l'eficiència, la productivitat i la seguretat en els entorns de producció i manufactura.

  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
- Consum-Empresarial-Infraestructura

Les aplicacions de consum IoT són dispositius connectats a internet que milloren la vida quotidiana a través de l'automatització, la conveniència i una millora de l'experiència d'usuari.

- Automòbils Connectats

- Rellotges Intel·ligents

- Electrodomèstics Connectats

- Sistemes de Seguretat Domèstica Intel·ligents

- Termostats Intel·ligents
  
Les aplicacions de tipus empresarial IoT optimitzen operacions, milloren l'eficiència i faciliten la gestió de recursos a través de dispositius connectats a internet.

- Gestió d'Actius i Inventari
- Manteniment Predictiu
- Sistemes de Monitorització de la Cadena de Forniment
- Agricultura Intel·ligent

Les aplicacions IoT en infraestructura faciliten la gestió i el manteniment de serveis essencials, millorant l'eficiència i la seguretat a gran escala.

- Gestió de Xarxes d'Aigua
- Control del Trànsit i Senyalització Intel·ligent
- Manteniment de Ponts i Carreteres
- Gestió de l'Energia en Edificis Públics
- Sistemes de Vigilància per a la Seguretat Pública
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
- **Disme 5 camps de aplicació i dintre de cada camp 3 exemples**

## Exemples per Sector

### Agricultura
- Drons per a la Imatge Agrícola
- Sensors de Humitat del Sòl
- Automatització de la Cosecha
- Sistemes de Reg Intel·ligent

### Medicina i Salut
- Dispositius Vestibles de Monitorització de la Salut
- Telemedicina
- Implants Intel·ligents
- Sistemes de Gestió d'Hospitals

### Transport
- Vehicles Autònoms
- Sistemes de Gestió del Trànsit Intel·ligents
- Rastreig GPS per a Flotes
- Apps de Mobilitat Compartida

### Indústria
- Manteniment Predictiu amb IoT
- Robotització de la Producció
- Sistemes de Control de Qualitat Automatitzats
- Monitorització de la Cadena de Producció

### Casa
- Termostats Intel·ligents
- Sistemes de Seguretat Domèstica
- Electrodomèstics Connectats
- Assistents de Veu Intel·ligents

### Ciutats
- Il·luminació Pública Intel·ligent
- Gestió de Residus Intel·ligent
- Sistemes de Transport Públic Eficients
- Xarxes Elèctriques Intel·ligents (Smart Grids)
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
- **Possibles problemes de seguretat IoT o mòbils**

Una gran part venen amb passwords per defecte que són molt simples o coneguts per tothom

Les actualitzacions és un altre dels problemes. O bé no es contemplen, o bé no es fan per no tenir mecanismes fàcils i ben definits

Un 70% al 2015 no encriptaven dades.

Una solució sería utilitzar xifratge i encriptació de les dades quan es pujen al núvol.

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **MODEL OSI - ARQUITECTURA -NIvells centre a edge**

Un sistema IoT està format per capes o nivells.
El model de referència d'IoT conté 7 capes semblant al model de referència del model OSI
Va des del nivell 1 dels dispositius físics i controladors (edge) , fins la col·laboració i processos del nivell 7 (centre)

## Nivells de l'Arquitectura de Xarxa IoT: Del Nivell 7 al 1

7. **Col·laboració i Processos**
   - Comunicació i col·laboració entre persones i processos empresarials.

6. **Aplicació**
   - Interpretació de la informació basada en les dades del dispositiu i les necessitats empresarials.

5. **Abstracció de Dades**
   - Representació i emmagatzematge de dades per al desenvolupament d'aplicacions.

4. **Acumulació de Dades**
   - Conversió de dades en moviment en dades en repòs, preparació per a l'ús en nivells superiors.

3. **Edge (Fog) Computing**
   - Anàlisi i transformació de dades per a emmagatzematge i processament de nivell superior.

2. **Connectivitat**
   - Gestió de la transmissió de dades entre dispositius i xarxes, i entre la xarxa i el processament de dades.

1. **Dispositius Físics i Controladors**
   - Dispositius de punt final que envien i reben informació en una xarxa IoT.

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **Dominis de aplicació, de xarxa i dispositiu M2M.**
  
El propòsit del model era proporcionar un marc comú per entendre la col·locació de diversos estàndards i protocols en un sistema IoT. El model ETSI inclou tres dominis

## Domini de l’Aplicació
- **Funcions de Gestió**: Inclou l'anàlisi de dades, la gestió de connectivitat, gestió intel·ligent de l'energia, gestió de flotes, entre altres.
- **Consum de Dades**: Utilitza les dades generades pels dispositius IoT per a diverses aplicacions.

## Domini de Xarxa
- **Transport de Dades**: Les dades es mouen des de la xarxa local fins al domini de l'aplicació.
- **Protocols**: Inclou protocols com el canvi d’etiquetes multiprotocol (MPLS), l’evolució a llarg termini (LTE), i la interoperabilitat mundial per a l’accés a microones (WiMax).

## Domini de Dispositiu M2M (Machine to Machine)
- **Dispositius Finals**: Inclou sensors, actuadors, i controladors.
- **Connexió a Xarxa**: Es connecten a la xarxa a través de passarel·les M2M.
- **Protocols**: Utilitza diversos protocols, com IEEE 802.15.4 i Bluetooth.
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **PAGINA 40 - Protocols**

## Capa de Dispositiu
- **Capa de Dispositiu**: Interacció i connectivitat de sensors/actuadors, element HARDWARE, empra protocols com IEEE 802.15.4, BLE.
   - Exemple 1: Sensors d'humitat en un sistema de reg intel·ligent.
   - Exemple 2: Actuadors en un sistema de climatització domèstica.
- **IEEE 802.15.4**: Estàndard per LR-WPAN, per dispositius sense fils de baix cost i baixa velocitat.
- **BLE (Bluetooth Low Energy)**: Protocol de 2,4 GHz per WPAN de baix consum d'energia.
- **Wi-Fi**: Protocols IEEE 802.11 per WLANs a freqüències de 2,4 GHz i 5 GHz.
- **NFC (Near Field Communication)**: Comunicació a distàncies menors de 4 cm.
- **Cellular**: Tecnologies 3GPP (4G, LTE, 5G) per connectivitat mòbil amplia.
- **LoRaWAN, Sigfox, NB-IoT**: Protocols LPWAN per transmissions de dades a llarga distància i baixa taxa.

## Capa de Comunicació
- **Capa de Comunicació**: Transport de dades, utilitza protocols com Zigbee, 6LoWPAN.
  - Exemple 1: Passarel·les Zigbee que connecten els sensors de llum amb el sistema de control central.
  - Exemple 2: Nodes 6LoWPAN que permeten la comunicació entre dispositius de baixa potència i l'internet.
- **Thread**: Estàndard domòtic que utilitza IPv6 sobre xarxes IEEE 802.15.4.
- **TCP (Protocol de control de transport)**: Protocol transport fiable amb sincronització i confirmacions.
- **UDP (User Datagram Protocol)**: Protocol de transport ràpid i no fiable sense garantia d'entrega.
- **RPL (Routing Protocol for Low-power and Lossy networks)**: Protocol d'encaminament per a xarxes IPv6 amb altes pèrdues i baix consum.
- **IPv6**: Espai d'adreces de 128 bits oferint una quantitat quasi il·limitada d'adreces úniques.
- **6LoWPAN (IPv6 over Low power Wireless Personal Area Networks)**: Estàndard IETF que adapta IPv6 a IEEE 802.15.4, enllaçant capes de xarxa i dispositius.

## Capa d'Aplicacions
- **Capa d'Aplicació**: Lògica per processar dades, usa protocols com MQTT, HTTP.
  - Exemple 1: Servei web que utilitza HTTP per proporcionar dades meteorològiques a una aplicació mòbil.
  - Exemple 2: Broker MQTT que gestiona els missatges entre els dispositius IoT d'una casa intel·ligent.
- **Zigbee**: Conjunt de protocols sobre IEEE 802.15.4, amb majoria d'especificacions en la capa d'aplicació.
- **HTTP/HTTPS (Protocol de transferència d'hipertext)**: Protocols d'aplicació per a la transmissió segura de dades web.
- **MQTT (Message Queueing Telemetry Transport)**: Protocol lleuger de missatgeria per a dispositius amb recursos limitats sobre TCP.
- **CoAP (Constrained Application Protocol)**: Protocol per a dispositius M2M restringits en xarxes, utilitzant transmissió de dades lleugera.

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
- **Que es MQTT - en que consisteix - sobre que funciona TCP/UDP...**
  - **MQTT (Message Queue Telemetry Transport)**: Protocol de missatgeria lleuger per sistemes encastats i SCADA.
  - **Sistema**: Publicació i subscripció, usa intermediaris sobre TCP/IP.
  - **Disseny**: Per a xarxes amb connexions inestables i pèrdues de dades intermitents.
  - **Funcionament**: Sobre TCP, optimitzant l'ús de bytes per missatge.
  - **Fiabilitat**: Alta, amb QoS que garanteix l'estat de la comunicació.

  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **Que es CoAP - en que consisteix - sobre que funciona TCP/UDP...**
  - **CoAP (Constrained Application Protocol)**: Protocol d'aplicació per dispositius amb recursos limitats sobre xarxes M2M.
  - **Format de Missatge**: Binari i simple, amb capçaleres de 4 bytes com a mínim.
  - **Tipus de Missatge**: Peticions i respostes amb opcions següents en format optimitzat.
  - **Transport**: Principalment sobre UDP, opcionalment sobre DTLS per seguretat millorada.
  - **Cuerpo del Missatge**: Definit per bytes posteriors a la capçalera, amb la longitud dictada per la mida del datagrama UDP.

  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **A quin tipus dispositiu correspon MQTT CoAP.**

   - **MQTT**: Òptim per a dispositius amb capacitat de mantenir una connexió TCP estable, com ara vehicles connectats o dispositius domòtics.
        - Exemple 1: Un termostat intel·ligent que envia actualitzacions de temperatura a un sistema central de domòtica.
        - Exemple 2: Dispositius portables de seguiment de la salut que transmeten dades periòdiques a un servidor central.
   - **CoAP**: Disenyat per a dispositius altament restringits com sensors de camp, actuadors o dispositius en xarxes de baix consum i baixa potència.
        - Exemple 1: Sensors d'humitat en agricultura intel·ligent que envien dades al servidor per optimitzar el reg.
        - Exemple 2: Il·luminació pública gestionada per sensors de llum que ajusten la brillantor basant-se en les condicions ambientals.
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
- **Que es doble factor autentificació**
   - **Doble Factor d'Autentificació (2FA)**: Mètode que combina dos tipus diferents de credencials per augmentar la seguretat d'accés.
      - **Exemple de 2FA**:
        - Introduir una contrasenya (factor de coneixement) i un codi únic enviat al mòbil de l'usuari (factor de possessió).

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **Com ha de ser sistema operatiu de IoT.**

   - **Sistema Operatiu IoT**:
     - **Lleuger**: Ocupació mínima de recursos de maquinari.
     - **Eficient**: Consum energètic optimitzat per dispositius de llarga durada.
     - **Segur**: Protecció robusta contra vulnerabilitats i atacs.
     - **Compatibilitat**: Suport ampli per protocols de comunicació IoT.
     - **Temps Real**: Capacitat per a processament d'esdeveniments en temps real.
     - **Adaptable**: Flexible amb diferents tipologies de maquinari IoT.
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **Característiques**
   - **Empremta (Footprint)**: Requisits mínims de hardware i memòria.
   - **Escalabilitat**: Adaptabilitat a dispositius de tota mena.
   - **Portabilitat**: Independència de les aplicacions del hardware subjacent.
   - **Modularitat**: Kernel central amb funcions addicionals com a mòduls.
   - **Connectivitat**: Suport per a protocols com Ethernet, Bluetooth, WiFi, LoRaWAN, IEEE 802.15.4, RFID.
   - **Temps Real**: Capacitat per a operar en temps real per aplicacions crítiques.
   - **Seguretat**: Implementació de funcions com SSL, autenticació segura d'arrencada, xifrat.
   - **Fiabilitat**: Compliment de normatives o estàndards per a dispositius crítics.
   - **Eficiència Energètica**: Optimització de la gestió de la bateria per a costos operatius reduïts.

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------





  - **TOP 10 VULNERABILITATS OWASP**

El problema de la securització de IoT és que afecta a molts
àmbits:
– Securitzar el dispositiu (S.O., firmware, interficie de gestió,…).
– El Cloud (on s’emmagatzemen les dades).
– La xarxa (com viatgen les dades, ports oberts..)
– Aplicacions mòbils per accedir hi i utilitzar-la.
– Xifrat.
– Mecanismes d’autenticació.
– Seguretat física.
– Ports i interfícies físiques accessibles (USB, Bluetooth , xarxa,

**Referents al sistema**

1. Assegurar la privacitat de les dades. Confidencialitat.
2. Minimitzar els atacs de superfície. Tots els llocs o punts d'entrada que poden ser explotats per un hacker.
3. Registrar els events crítics. Registrar els events en el sistema, incloent mesures d'operacions de xarxa normals i alertes per activitats en la xarxa inusuals.
4. Suport a operacions de seguretat mínimes. El personal de seguretat requereix formació i gestió, per tal de controlar els sistemes per detectar incidents, tractar les vulnerabilitats descobertes i investigar incompliments de seguretat.

**Referents a la Capa Dispositiu**

5. **Seguretat d'arrencada i integritat del sistema:** Els dispositius IoT han de disposar de mesures per garantir que els sistemes operatius i el programari no siguin manipulats per hackers o programari maliciós. S'han de fer servir components de maquinari per assegurar que els dispositius funcionin com s'espera, que la identitat del dispositiu sigui vàlida i que les dades relacionades amb la seguretat, com ara les claus de xifratge, estiguin protegides contra manipulacions o pèrdues.
6. **Sistema endurit i segur:** Els sistemes operatius dels dispositius IoT no han de córrer serveis de xarxa innecessaris, ja que aquests podrien oferir vies d'accés als actors de amenaces cap al sistema i la xarxa IoT.
7. **Assegurar el firmware i les actualitzacions del sistema operatiu:** Molts dispositius no tenen accés contínu a internet per rebre actualitzacions, ja que es troben en ubicacions remotas. És crucial trobar mètodes segurs per assegurar-se que el firmware i les actualitzacions del sistema operatiu es puguin aplicar de manera regular per corregir vulnerabilitats i millorar la seguretat del dispositiu IoT.

**Referents a la Capa de Comunicació**

La comunicació IoT és bidireccional. Els sensors transmeten dades a les aplicacions a través de passarel·les i els actuadors controlen les aplicacions a través de la xarxa. Les dades transmeses es poden robar, alterar o destruir. Les comunicacions de control es poden alterar o falsificar completament. Els resultats poden ser desastrosos.

8. **Comunicacions segures:** Els sistemes IoT han d’utilitzar mesures per prevenir la intercepció i falsificació de dades. Han de fer servir tècniques per verificar que les dades rebudes provenen de fonts autèntiques i que no han estat alterades durant la transmissió. Garantir la seguretat de les comunicacions és essencial per protegir la integritat i la confidencialitat de les dades en un entorn IoT.

**Referents a la Capa d'Aplicació**

Un administrador configura els dispositius IoT mitjançant una interfície de línia d'ordres (CLI) o una interfície gràfica d'usuari (GUI).

9. **Credencials predeterminades o febles:** Tots els dispositius IoT han d'utilitzar un fort procés d'autenticació. Molts productes IoT es distribueixen amb credencials predeterminades per facilitar la configuració inicial. No obstant això, aquestes credencials s'han de canviar abans de posar el dispositiu en servei. Les contrasenyes han de complir amb les polítiques de seguretat quant a longitud i complexitat per prevenir atacs d'adivinació de contrasenya.
10. **Interfícies web segures:** Les interfícies web utilitzades en dispositius IoT han de ser segures i protegides contra diversos tipus de ciberatacs. Les instal·lacions d'inici de sessió han de ser resistents a l'atac. A més, els dispositius IoT interactuen amb aplicacions web mitjançant interfícies de programa d'aplicació (API), i les credencials utilitzades en aquestes interaccions també han de ser protegides per evitar possibles atacs.

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **Dis 3/4 vulnerabilitats del OWASP, 2 obstacle i solució de cada**

**1-Inseguretat en les Aplicacions Web de Gestió d'IOT**

*Obstacles:*
- Noms d'usuari i contrasenyes per defecte.
- No bloqueig del compte.
- Vulnerabilitats XSS, CSRF, SQLi.

*Solucions:*
- Permetre canviar els noms d'usuari i contrasenyes per defecte.
- Habilitar el bloqueig del compte.
- Realitzar avaluacions de les aplicacions web.

**2-Mecanismes Febles d'Autenticació i Autorització**

*Obstacles:*
- Passwords febles.
- Els mecanismes de recuperació de passwords són insegurs.
- No està habilitat el doble factor d'autenticació.

*Solucions:*
- Demanar passwords forts i complexos.
- Verificar que els mecanismes de recuperació de passwords siguin segurs.
- Implementar el doble factor d'autenticació sempre que sigui possible.

**3-Inseguretat en els Serveis de Xarxa**

*Obstacles:*
- Ports innecessaris estan oberts.
- Ports exposats a internet via UPnP.
- Serveis de xarxa vulnerables a denegació de servei.

*Solucions:*
- Minimitzar els ports oberts de la xarxa.
- No utilitzar UPnP.
- Revisar els serveis de xarxa en busca de vulnerabilitats.


**4-Falta de Xifrat a Totes les Comunicacions Implicades**

*Obstacles:*
- Informació sensible es passa en text en clar.
- No està habilitat o no hi ha SSL/TLS.
- S'utilitzen protocols d'encriptació propietaris.

*Solucions:*
- Encriptar la comunicació entre els components del sistema.
- Mantenir les implementacions SSL/TLS.
- No utilitzar solucions d'encriptació propietàries.

**5-Privacitat de les Dades**

*Obstacles:*
- Es recopila molta informació personal.
- La informació recollida no està correctament protegida.
- A l'usuari final no se li dóna l'opció de permetre la recol·lecció de determinats tipus de dades.

*Solucions:*
- Reduir la recol·lecció de dades.
- Anonimitzar la recol·lecció de dades.
- Donar als usuaris finals la capacitat de decidir quines dades es recullen.

**6-Inseguretat al Núvol**

*Obstacles:*
- Les interfícies no es revisen per vulnerabilitats de seguretat.
- Hi ha presents passwords febles.
- No hi ha doble factor d'autenticació.

*Solucions:*
- Avaluacions de seguretat de totes les interfícies del núvol.
- Implementar doble factor d'autenticació.
- Requerir passwords forts i complexos.

**7-Inseguretat al Núvol**

*Obstacles:*
- Les interfícies no es revisen per vulnerabilitats de seguretat.
- Hi ha presents passwords febles.
- No hi ha doble factor d'autenticació.

*Solucions:*
- Avaluacions de seguretat de totes les interfícies del núvol.
- Implementar doble factor d'autenticació.
- Requerir passwords forts i complexos.

**8-Inseguretat en els Dispositius IoT**

*Obstacles:*
- Les opcions de seguretat de contrasenya no estan disponibles.
- Opcions d'encriptació no disponibles.
- No hi ha opció per habilitar el registre de seguretat.

*Solucions:*
- Fer que el registre de seguretat estigui disponible.
- Permetre la selecció d'opcions de xifratge.
- Notificar als usuaris finals pel que fa a alertes de seguretat.

**9-Inseguretat al Software dels Dispositius IoT**

*Obstacles:*
- Els servidors d'actualitzacions no són segurs.
- Les actualitzacions del dispositiu es transmeten sense encriptació.
- Les actualitzacions del dispositiu no estan signades.

*Solucions:*
- Signar les actualitzacions.
- Verificar les actualitzacions abans d'instal·lar-les.
- Fer segurs els servidors d'actualitzacions.

**10-Inseguretat Física**

*Obstacles:*
- Ports externs innecessaris com els ports USB.
- Accés als sistemes operatius a través de dispositius extraïbles.
- Incapacitat per limitar les capacitats administratives.

*Solucions:*
- Minimitzar els ports externs com els USB.
- Protegir adequadament el sistema operatiu.
- Incloure la capacitat per limitar les capacitats administratives.

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **Disme 2 requeriment de seguretat de cada capa**

**Capa de Comunicació:**
1. Encriptació de dades.
2. Autenticació de dispositius.

**Capa d'Aplicació:**
1. Control d'accés basat en rols.
2. Auditoria de registre d'activitats.

**Capa de Dispositiu:**
1. Actualitzacions de seguretat automàtiques.
2. Control d'accés físic.
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
   
- DEKA
Va crear un braç alimentat per bateries que utilitzava l’activitat elèctrica dels músculs esquelètics per controlar-lo. 





--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

# PDF 2
## iOS
- **Sistema de fitxers iOS - particions**
- **Característques APFS**
# Sistema de Fitxers iOS

## FileSystem HFSX
- **Tipus**: Sistema Jeràrquic d'Arxius (HFSX).
- **Detalls**: Una variació del HFS+ (Sistema Jeràrquic d'Arxius Extès).

## Transició a APFS
- **Substitució**: Per APFS (Sistema d'Arxius d'Apple) a partir del 2017.
- **Raó**: Optimitzat per unitats flash i d'estat sòlid.
- **Particions**: Conté 2 particions.

## Característiques d'APFS
1. **Suport per Unitats**: Especialment per unitats Flash i SSD, proporcionant més rapidesa i eficiència.
2. **Còpies Instantànies**: Facilita backup i restauració ràpida.
3. **Encriptació Integrada**: Augmenta la seguretat de les dades.
4. **Optimització per Dispositius Mòbils**: Millora el rendiment i redueix el consum d'energia.
5. **Desduplicació de Dades**: Ajuda a eliminar dades duplicades, estalviant espai.
6. **Resistència a Errades**: Millora la gestió de problemes tant de hardware com de software.
  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
- **Libreries Apple, NO SEGUR**

# Estructura de Particions en un Sistema Operatiu

## Partició OS (Sistema Operatiu)

### `/Library/`
- Conté plugins del sistema i de configuració.
- Exemples: àudio, bluetooth, etc.

### `/private/`
- Conté `/etc/` i `/var/`.
- Inclou arxius com `fstab` (discos i particions) i `passwd`.

### `/System/`
- Conté les llibreries core del sistema.

### `/usr/`
- Conté binaris executables i dades de configuració horària.

## Partició DATA (Dades)

### `/Keychains/`
- Conté "keychain.db", que són les contrasenyes d'usuari de diferents aplicacions.

### `/Logs/`
- Registres del sistema.

### `/mobile/`
- Informació d'aplicacions i configuració de l'usuari.
- Exemples: Contactes, Calendari, Cookies, Mail, etc.

### `/Preferences/`
- Configuració referent als recursos de la xarxa.

### `/Root/`
- Informació del GPS i de certificats.



  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **Engegada - actualitzacions - funcionament



  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **Secure Enclave - 2 tipus de Codi UID i GID**

# Secure Enclave

## Definició
- **Secure Enclave** és un coprocessador que forma part dels dispositius Apple, el qual incorpora un gestor de claus de seguretat basat en hardware, aïllat del processador principal.

## Funcionalitats
- **Encriptació de Dades**: 
  - Les dades de la clau s'encripten dins del Secure Enclave utilitzant un sistema en un xip (SoC). 
  - Aquest SoC inclou un generador de nombres aleatoris per a la seguretat addicional.

- **Encriptació dels Arxius (Crypto Engine)**:
  - Utilitza un sistema de xifrat dedicat AES de 256 bits.

## Generació i Gestió de Claus
- **Generació de Claus**: 
  - Secure Enclave genera les seves pròpies claus de manera segura.
- **Tipus de Claus**:
  - **UID (Unique ID)**: Una clau única per a cada dispositiu.
  - **GID (Device Group ID)**: Una clau comú per a cada família de processadors com A5, A6, etc.

## Seguretat i Privacitat
- **Esborrat de Claus**: 
  - Les claus s'esborren de forma segura quan és necessari.
- **Creació de Claus**:
  - Les claus es creen durant la fabricació del dispositiu.
- **Protecció contra Accés Extern**: 
  - Cap software ni firmware pot llegir les claus directament.

# Resum sobre l'UID, GID i la Seguretat en Dispositius iOS

## UID (Unique ID)
- **Associació amb Dispositiu**: Cada dispositiu té un UID únic.
- **Seguretat en Transferències**: Si un component com el SSD intern es trasllada a un altre dispositiu, els arxius no són accessibles perquè l'UID no coincideix.

## Generació de Claus Criptogràfiques
- **Més enllà de l'UID i GID**: S'hi afegeixen altres claus criptogràfiques.
- **Generador de Nombres Aleatoris (RNG)**: Les claus són creades mitjançant un algorisme basat en codi font CTR_DRBG.

## Entropia del Sistema
- **Generació d'Entropia**: Prové de variacions temporals durant l'arrencada i d'interrupcions de sincronització després d'arrencar el dispositiu.

## Esborrat de Claus
- **Seguretat en l'Esborrat**: El procés d'esborrat de les claus és tan segur com la seva creació.

## Emmagatzematge Eficaç en iOS
- **Effaceable Storage**: Funció dedicada a l'esborrat segur de dades en dispositius iOS.





  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **Procés d'engedada iOS**

# Engegada del Dispositiu iOS

## Protecció de l'Arrencada
- **Protecció de l'Arrancada i Execució del SO**: Assegura que el software de nivell més baix no està manipulat.

## Execució de Codi de Boot ROM
- **Boot ROM (iBoot)**: A l'engegar-se, s'executa el codi de la Boot ROM.
- **Confiança i Seguretat**: En la fabricació del xip s'estableix que el codi és segur (Arrel de confiança de hardware).
- **Verificació del Codi**: La clau pública Apple Root CA de la Boot ROM verifica la signatura d'Apple abans de carregar el codi.

## Etapes Post-Boot ROM
- **Execució del Nucli d'iOS**: Després de l'iBoot, es verifica i executa el nucli d'iOS.
- **LLB en Dispositius Antics**: Dispositius antics utilitzen el Low-Level Bootloader (LLB) abans del iBoot.

## Gestió d'Errors
- **Modes de Recuperació**: 
  - Si la ROM d'arrencada no pot carregar el LLB, es passa al mode DFU.
  - Si hi ha problemes amb LLB o iBoot, es passa al mode de recuperació.
- **Restauració**: En ambdós casos, es necessita connectar a iTunes/Finder i restaurar a configuració de fàbrica.

## Secure Enclave i BPR
- **Secure Enclave**: Coprocessador que gestiona claus, aïllat del processador principal.
- **BPR (Boot Progress Register)**: Secure Enclave utilitza el BPR per limitar l'accés a les dades en diferents modes (DFU, Mode de recuperació).

## Autorització de Software de Sistema
- **Prevenció de Retrocessos**: Evita el retorn a versions anteriors d'iOS amb vulnerabilitats.

## Protecció del Nucli iOS
- **Inicialització del Nucli iOS i KIP (Kernel Integrity Protection)**: Protegeix contra modificacions del codi del nucli i controladors.
- **Controlador de Memòria**: Proveeix una regió de memòria física protegida per carregar el kernel i extensions.
- **Restriccions Post-Arrencada**: Denega l'escriptura a la regió de memòria protegida i configura la MMU (Memory Management Unit) per a protegir la regió de memòria del nucli.

  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **Boot ROM (iBoot)**

# Boot ROM (iBoot) en Dispositius iOS

## Funció Principal
- **Inicia el Procés d'Arrencada**: Actua com a primera etapa en el procés d'engegada del dispositiu.

## Seguretat i Verificació
- **Verifica la Integritat del Software**: Comprova que el software d'arrencada no estigui manipulat.
- **Utilitza la Clau Pública Apple Root CA**: Per verificar la signatura d'Apple en el software.

## Paper en la Seguretat del Dispositiu
- **Forma part de l'Arrel de Confiança de Hardware**: Estableix la base de la seguretat del dispositiu des de l'inici.

  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **Que pasa quan es produeix error arrancada iOS**



  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **Utilitza update de software per no deixar tornar a verions anteriors iOS**



  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **Per evitar que al carregar el kernel es protegeux la memòria MMU**



  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **Update software nomes conegut per apple - com ho fa**
- **Fica una serie de passos i harem d'ordenar - actualització en iOS POSIBLE PREGUNTA**



  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **Claus Clau de fitxer o Clau de classe.**


  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **En teoria Passcode NO SURT**
  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **Que es TOUCH ID i FACE ID**


  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

## Android
- **PAG 68 i 69**


  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **S'aguardava sense compliar ara compilar ANDROID**




  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **Contingut de apk -AndroidManifest.xml - classes.dex...**



  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **Sistema de fitxers utilitzava YAFFS - EXT4 (NORMALMENT) - F2FS - RFS**



  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **Que conté cada carpeta/partició ANDROID**



  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **Com arranca**



  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **4 components - activities - services - content providers - Broadcast receivers**



  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

- **DEP i ASLR**



  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------





